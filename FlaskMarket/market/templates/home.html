{% extends 'base.html' %}
{% block title %}
    Home Page
{% endblock %}
{% block content %}
    <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-dark" style="color:white">
        <div class="col-md-6 p-lg-5 mx-auto my-5">
            <h1 class="display-4 font-weight-normal">Welcome to Eric's Coded Flask Market</h1>
            <br>
            <p class="lead font-weight-normal">Start purchasing products by clicking the link below</p>
            <!-- <a class="btn btn-primary" href="{{ url_for('market_page') }}">Get Started</a> -->
        </div>
        <div class="product-device box-shadow d-none d-md-block"></div>
        <div class="product-device product-device-2 box-shadow d-none d-md-block"></div>
    </div>
    <button id='buy_now_btn'>BUY NOW</button>
    <!-- for frontend design -->
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        const checkout_public_key = '{{checkout_public_key}}';
        const checkout_session_id = '{{checkout_session_id}}';
    </script>
    <script>
        var stripe = Stripe(checkout_public_key)
        const button = document.querySelector('#buy_now_btn');

        button.addEventListener('click', event => {
            stripe.redirectToCheckout({
                // Make the id field from the Checkout Session creation API response
                // available to this file, so you can provide it as parameter here
                // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
                sessionId: checkout_session_id
            }).then(function (result) {
                // If `redirectToCheckout` fails due to a browser or network
                // error, display the localized error message to your customer
                // using `result.error.message`.
            });
        })
    </script>
{% endblock %}